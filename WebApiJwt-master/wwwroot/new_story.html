<html>
<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>대웅제약 BI</title>
	<!--<link href="app/css/core.css" rel="stylesheet">-->


	<link href="dist/css/bootstrap.min.css" rel="stylesheet">

	<link href="app/css/core0220.css?v20200226" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>



	<link href="dist/css/datepicker/datepicker3.css?v=202002241036" rel="stylesheet">

	<!--

	<link href="dist/css/bootstrap.min.css?v=202002241036" rel="stylesheet">
	<link href="dist/css/iCheck/custom.css?v=202002241036" rel="stylesheet">
	<link href="dist/css/font-awesome/css/font-awesome.css?v=202002241036" rel="stylesheet">

	-->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

	<!--
	<script src="dist/js/bootstrap.min.js"></script>
	<script src="dist/js/iCheck/icheck.min.js"></script>


	-->
	<script src="dist/js/jquery-ui/jquery-ui.min.js"></script>
	<script src="dist/js/datepicker/bootstrap-datepicker.js"></script>

	<style>
		/*

				.btn-md {
					min-height: 34px;
					min-width: 40px;
					width: 100%;
				}

				.content {
					margin-top: 30px;
					margin-left: 15px;
					margin-right: 15px;
					margin-bottom: 30px;
				}

				.seqtable {
					width: 100%;
				}

					.seqtable > tbody > tr > td {
						text-align: left;
						padding-right: 5px;
					}

						.seqtable > tbody > tr > td:nth-child(2) {
							text-align: center;
						}

				.seqselectbox {
					min-width: 90px;
				}

				.custom-file-input {
					position: relative;
					z-index: 2;
					width: 100%;
					height: calc(2.25rem + 2px);
					margin: 0;
					opacity: 0;
				}

				.custom-file-label {
					padding: .5rem .75rem;
				}

				.custom-file-label {
					position: absolute;
					top: 0;
					right: 0;
					left: 0;
					z-index: 1;
					height: calc(2.25rem + 2px);
					padding: .375rem .75rem;
					line-height: 1.5;
					color: #495057;
					background-color: #fff;
					border: 1px solid #ced4da;
					border-radius: .25rem;
				}

				label {
					display: inline-block;
					margin-bottom: .5rem;
				}


				.dropdown {
					text-align: left;
				}

				.dropdown-submenu {
					position: relative;
				}

					.dropdown-submenu .dropdown-menu {
						top: 0;
						left: 100%;
						margin-top: -1px;
					}

				.level > li {
					padding: 3px 20px 3px 20px;
					width: max-content;
				}
		*/
	</style>

	<script>
		$(document).ready(function () {
			$('ul.dropdown-menu [data-toggle=dropdown]').on('click', function (event) {
				event.preventDefault();
				event.stopPropagation();
				$(this).parent().siblings().removeClass('open');
				$(this).parent().toggleClass('open');
			});
		});
	</script>

</head>
<body class="bg">
	<nav class="navbar navbar-default navbar-fixed-top orange_bar" role="navigation">
		<div class="container-fluid">

			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">메뉴</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="/" class="navbar-brand blank_logo">  </a>
			</div>

			<div class="navbar-collapse collapse " id="navbar">
				<ul class="nav navbar-nav">
					<li class=" dropdown">
						<a href="#" class=" dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="glyphicon glyphicon-print" aria-hidden="true"></span>
							FineReport
							<span class="caret"></span>
						</a>

						<ul class="dropdown-menu">
							<li class="dropdown dropdown-submenu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">MR별 손익</a>

								<ul class="dropdown-menu">
									<li class="dropdown dropdown-submenu">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">데이타 입력</a>
										<ul class="dropdown-menu">
											<li><a href="#">비용취합양식 업로드</a></li>
											<li><a href="#">비용취합양식 다운로드</a></li>
											<li><a href="#">기준정보 다운로드</a></li>
											<li><a href="#">최종파일 업로드</a></li>
											<li><a href="#">비용취합결과 업로드_일비</a></li>
											<li><a href="#">비용취합결과 업로드_스타시상금</a></li>
											<li><a href="#">비용취합결과 업로드_판촉비</a></li>
											<li><a href="#">비용취합결과 업로드_인건비</a></li>
											<li><a href="#">비용취합결과 업로드_경진대회</a></li>
											<li><a href="#">비용취합결과 업로드_디테일</a></li>
											<li><a href="#">비용취합결과 업로드_풀동도</a></li>
											<li><a href="#">비용취합결과 업로드_시상금</a></li>
											<li><a href="#">비용취합결과 업로드_숙박/시외교통비</a></li>
											<li><a href="#">비용취합결과 업로드_사무소운영비</a></li>
											<li><a href="#">수익군 업로드</a></li>

										</ul>
									</li>
									<li><a href="#">Home</a></li>
									<li><a href="#">매출액</a></li>
									<li><a href="#">매출총이익(%)</a></li>
									<li><a href="#">수익군별 매출</a></li>
									<li><a href="#">영업판관비</a></li>
									<li><a href="#">공통비차감전이익</a></li>
									<li><a href="#">손익 요약 </a></li>
								</ul>
							</li>
							<li class="dropdown dropdown-submenu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">생산</a>

								<ul class="dropdown-menu">
									<li class="dropdown dropdown-submenu">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown">데이타 입력</a>
										<ul class="dropdown-menu">
											<li><a href="#">비용취합양식 업로드</a></li>
											<li><a href="#">비용취합양식 다운로드</a></li>
											<li><a href="#">기준정보 다운로드</a></li>
											<li><a href="#">최종파일 업로드</a></li>
											<li><a href="#">비용취합결과 업로드_일비</a></li>
											<li><a href="#">비용취합결과 업로드_스타시상금</a></li>
											<li><a href="#">비용취합결과 업로드_판촉비</a></li>
											<li><a href="#">비용취합결과 업로드_인건비</a></li>
											<li><a href="#">비용취합결과 업로드_경진대회</a></li>
											<li><a href="#">비용취합결과 업로드_디테일</a></li>
											<li><a href="#">비용취합결과 업로드_풀동도</a></li>
											<li><a href="#">비용취합결과 업로드_시상금</a></li>
											<li><a href="#">비용취합결과 업로드_숙박/시외교통비</a></li>
											<li><a href="#">비용취합결과 업로드_사무소운영비</a></li>
											<li><a href="#">수익군 업로드</a></li>

										</ul>
									</li>
									<li><a href="#">생산지표</a></li>
									<li><a href="#">생산지표 현황</a></li>
									<li><a href="#">수익성 분석 그래프</a></li>
									<li><a href="#">품목별 ROI 지표</a></li>
									<li><a href="#">R&D비용 수익 분석</a></li>
								</ul>
							</li>
							<li>
								<a href="#">R&D</a>

							</li>
							<li>
								<a href="#">CH마케팅</a>

							</li>

						</ul>



					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="glyphicon glyphicon-usd" aria-hidden="true"></span>
							경영관리
							<span class="caret"></span>
						</a>

						<ul class="dropdown-menu">
							<li><a href="#">손익계산서</a></li>
							<li><a href="#">플랜트별손익</a></li>
							<li><a href="#">손익예측</a></li>
							<li><a href="#">R&D 비용</a></li>
							<li><a href="#">인원 / 인건비</a></li>
							<li><a href="#">제품별 표준/실제원가비교</a></li>
						</ul>

					</li>
					<li class=" dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
							영업관리
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">1</a></li>
							<li><a href="#">21</a></li>
							<li><a href="#">3</a></li>
							<li><a href="#">4</a></li>
							<li><a href="#">Action5</a></li>
							<li><a href="#">Action6</a></li>
						</ul>
					</li>
					<li class=" dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
							생산관리
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">Action1</a></li>
							<li><a href="#">Action2</a></li>
							<li><a href="#">Action3</a></li>
						</ul>
					</li>
					<li class=" dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
							경영회의
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="#">시나리오 설정</a></li>
							<li><a href="#">원인분석 첨부</a></li>
							<li><a href="#">경영회의 진행</a></li>

						</ul>
					</li>
				</ul>



				<ul class="nav navbar-nav navbar-right">
					<li>
						<div class="navbar-form navbar-left">
							<div class="btn-group">
								<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
									대웅제약
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu" style="margin-top:14px;" role="menu">
									<li><a href="#">대웅제약</a></li>
									<li><a href="#">(주)대웅제약</a></li>
									<li><a href="#">대웅바이오</a></li>
									<li><a href="#">한울바이오</a></li>
									<li><a href="#">DNC</a></li>
								</ul>
							</div>
						</div>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							홍길동 <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li>
								<a href="#">
									<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
									사용자 관리
								</a>
							</li>
							<li>
								<a href="#">
									<span class="glyphicon glyphicon-signal" aria-hidden="true"></span>
									지표 관리
								</a>
							</li>
							<li>
								<a href="#">
									<span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
									Dashboard 관리
								</a>
							</li>
							<!--<li role="separator" class="divider"></li>-->

						</ul>
					</li>
					<li>
						<a href="#">
							&nbsp;
							<span class="glyphicon glyphicon-off" aria-hidden="true"></span>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<!--
	<div class="container-flex">
		 <iframe scrolling="no" style="width:100%;height:100%" src="http://10.1.20.66:8080/sso/dw_sso.jsp?cuid=FkyRGV0kJgYAtlsAAADH0noAAFBWlFBK&X_COMPANY=1200&X_DATESETTING=202001&userid=Fdjsb3bv%2BvxqSRzrfeNONQ%3D%3D"></iframe>
	</div>
	-->
	<div class="content">
		<div class="col-lg-12">
			<div class="ibox">
				<div class="ibox-content">
					<h5><b>■ 회의 시나리오 설정</b></h5>
					<div class="content">
						<div class="row">
							<div class="col-sm-6 b-r">

								<form class="form-horizontal" id="formBase" enctype="">
									<div class="form-group">
										<label class="col-sm-2 control-label">일정 :</label>
										<div class="col-sm-10">
											<div class="input-group">
												<input type="text" id="date" placeholder="yyyy-mm-dd" class="form-control" data-mask="9999-99-99" autocomplete="off" maxlength="10" value="" style="cursor:pointer">
												<span class="input-group-addon" style="background:white; cursor:pointer" id="calendar"><i class="fa fa-calendar"></i></span>
											</div>
										</div>
									</div>

									<div class="form-group">
										<label class="col-sm-2 control-label">주제 :</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" placeholder="주제를 입력하세요." id="title" name="title" value="" autocomplete="off">
										</div>
									</div>

									<br>
									<div class="form-group">
										<label class="col-sm-2 control-label">추가 :</label>
										<div class="col-sm-8">
											<select class="form-control" id="story_add">
												<option value="select1">매출현황</option>
												<option value="select2">손익현황</option>
												<option value="select3">재고현황</option>
												<option value="select4">생산현황</option>
											</select>
										</div>
										<div class="col-sm-2">
											<button type="button" class="btn btn-default btn-md" id="plus"><i class="fa fa-plus"></i></button>
										</div>
									</div>

									<br>
									<ul class="sortable-list connectList agile-list ui-sortable" id="inprogress">
										<!--<li class="ui-sortable-handle form-inline" id="item1">
											<table id="story_table">
												<colgroup>
													<col width="10%"/>
													<col width="20%"/>
													<col width="*"/>
												</colgroup>
												<tbody>
													<tr>
														<td>
															<button type="button" class="btn btn-default btn-md"  id="minus">
																<i class="fa fa-minus"></i>
															</button>
														</td>
														<td>
															<select class="form-control" id="story_seq">
																<option value="seq1">1</option>
																<option value="seq2">2</option>
																<option value="seq3">3</option>
																<option value="seq4">4</option>
															</select>
														</td>
														<td>
															매출현황
														</td>
													</tr>
												</tbody>
											</table>
										</li>
										-->
									</ul>
								</form>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<form class="form-horizontal" id="formDetail" enctype="">
										<input type="text" class="form-control" placeholder="작성하세요." id="detail_title" name="title" value="" autocomplete="off">

										<br>
										<div class="form-group">
											<div class="i-checks col-sm-5">
												<label class="">
													<div class="iradio_square-green" style="position: relative;">
														<input type="radio" value="연결리포트" name="ladio" id="link" style="position: absolute; opacity: 0;">
													</div>
													<i></i> 연결리포트
												</label>
											</div>

											<div class="i-checks col-sm-5">
												<label class="">
													<div class="iradio_square-green" style="position: relative;">
														<input type="radio" value="이미지" name="ladio" id="image" style="position: absolute; opacity: 0;">
													</div>
													<i></i> 이미지
												</label>
											</div>
										</div>
										<div class="form-group">
											<div class="i-checks col-sm-12 text-center">
												<button type="button" class="btn btn-w-m btn-primary" onclick="addDetail()">추가하기</button>
											</div>
										</div>

										<br>
										<ul class="sortable-list connectList2 agile-list ui-sortable" id="inprogress2">
										</ul>
									</form>
								</div>
							</div>


							<div class="col-sm-12 text-center">
								<button type="button" class="btn btn-w-m btn-primary" onclick="">저장</button>
								<button type="button" class="btn btn-w-m btn-default" onclick="cangoback()">취소</button>
							</div>

							<!-- 연결리포트 모달 -->
							<div class="modal inmodal fade" id="myModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
								<div class="modal-dialog modal-md">
									<div class="modal-content">
										<div class="modal-header">

											<div class="form-group">
												<form class="form-horizontal" id="formlink" enctype="">

													<div class="form-group">
														<div class="col-sm-6">
															<select class="form-control" id="compony">
																<option value="대응제약">대응제약</option>
																<option value="대응바이오">대응바이오</option>
																<option value="한을바이오">한을바이오</option>
																<option value="DNC">DNC</option>
															</select>
														</div>
													</div>

													<div class="form-group">
														<div class="col-sm-4">
															<div class="dropdown">
																<button class="btn btn-default dropdown-toggle" id="menu_list" type="button" data-toggle="dropdown">
																	목록 <span class="caret"></span>
																</button>

																<ul class="dropdown-menu">
																	<li class="dropdown-submenu">
																		<a class="operation" tabindex="-1" href="#">경영관리</a>
																		<ul class="dropdown-menu level">
																			<li onclick='select_menu(this)'>손익계산서 [M]</li>
																			<li onclick='select_menu(this)'>플랜트별손익 [M]</li>
																			<li onclick='select_menu(this)'>매출액예측 [M]</li>
																			<li onclick='select_menu(this)'>현금흐름표</li>
																			<li onclick='select_menu(this)'>수익성 [Q]</li>
																			<li onclick='select_menu(this)'>성장성 [Q]</li>
																			<li onclick='select_menu(this)'>안정성 [Q]</li>
																		</ul>
																	</li>

																	<li class="dropdown-submenu">
																		<a class="sales" tabindex="-1" href="#">영업관리</a>
																		<ul class="dropdown-menu level">
																			<li onclick='select_menu(this)'>일일순도 [D]</li>
																			<li onclick='select_menu(this)'>직거래매출(재설계)</li>
																			<li onclick='select_menu(this)'>일일순도내역</li>
																		</ul>
																	</li>

																	<li class="dropdown-submenu">
																		<a class="production" tabindex="-1" href="#">생산관리</a>
																		<ul class="dropdown-menu level">
																			<li onclick='select_menu(this)'>생산실적</li>
																			<li onclick='select_menu(this)'>제조수율</li>
																		</ul>
																	</li>
																</ul>
															</div>
														</div>

														<!-- case M -->
														<div id="caseM" style="display:none">
															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseM_year" type="button" data-toggle="dropdown">
																		년도 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseM_year")'>2015년</li>
																		<li onclick='setDate(this, "caseM_year")'>2016년</li>
																		<li onclick='setDate(this, "caseM_year")'>2017년</li>
																		<li onclick='setDate(this, "caseM_year")'>2018년</li>
																		<li onclick='setDate(this, "caseM_year")'>2019년</li>
																		<li onclick='setDate(this, "caseM_year")'>2020년</li>
																	</ul>
																</div>
															</div>

															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseM_month" type="button" data-toggle="dropdown">
																		월 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseM_month")'>1월</li>
																		<li onclick='setDate(this, "caseM_month")'>2월</li>
																		<li onclick='setDate(this, "caseM_month")'>3월</li>
																		<li onclick='setDate(this, "caseM_month")'>4월</li>
																		<li onclick='setDate(this, "caseM_month")'>5월</li>
																		<li onclick='setDate(this, "caseM_month")'>6월</li>
																		<li onclick='setDate(this, "caseM_month")'>7월</li>
																		<li onclick='setDate(this, "caseM_month")'>8월</li>
																		<li onclick='setDate(this, "caseM_month")'>9월</li>
																		<li onclick='setDate(this, "caseM_month")'>10월</li>
																		<li onclick='setDate(this, "caseM_month")'>11월</li>
																		<li onclick='setDate(this, "caseM_month")'>12월</li>
																	</ul>
																</div>
															</div>
														</div>

														<!-- case Q -->
														<div id="caseQ" style="display:none">
															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseQ_year" type="button" data-toggle="dropdown">
																		년도 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseQ_year")'>2015년</li>
																		<li onclick='setDate(this, "caseQ_year")'>2016년</li>
																		<li onclick='setDate(this, "caseQ_year")'>2017년</li>
																		<li onclick='setDate(this, "caseQ_year")'>2018년</li>
																		<li onclick='setDate(this, "caseQ_year")'>2019년</li>
																		<li onclick='setDate(this, "caseQ_year")'>2020년</li>
																	</ul>
																</div>
															</div>

															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseQ_quarter" type="button" data-toggle="dropdown">
																		분기 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseQ_quarter")'>1분기</li>
																		<li onclick='setDate(this, "caseQ_quarter")'>2분기</li>
																		<li onclick='setDate(this, "caseQ_quarter")'>3분기</li>
																		<li onclick='setDate(this, "caseQ_quarter")'>4분기</li>
																	</ul>
																</div>
															</div>
														</div>

														<!-- case D -->
														<div id="caseD" style="display:none">
															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseD_year" type="button" data-toggle="dropdown">
																		년도 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseD_year")'>2015년</li>
																		<li onclick='setDate(this, "caseD_year")'>2016년</li>
																		<li onclick='setDate(this, "caseD_year")'>2017년</li>
																		<li onclick='setDate(this, "caseD_year")'>2018년</li>
																		<li onclick='setDate(this, "caseD_year")'>2019년</li>
																		<li onclick='setDate(this, "caseD_year")'>2020년</li>
																	</ul>
																</div>
															</div>

															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseD_month" type="button" data-toggle="dropdown">
																		월 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseD_month")'>1월</li>
																		<li onclick='setDate(this, "caseD_month")'>2월</li>
																		<li onclick='setDate(this, "caseD_month")'>3월</li>
																		<li onclick='setDate(this, "caseD_month")'>4월</li>
																		<li onclick='setDate(this, "caseD_month")'>5월</li>
																		<li onclick='setDate(this, "caseD_month")'>6월</li>
																		<li onclick='setDate(this, "caseD_month")'>7월</li>
																		<li onclick='setDate(this, "caseD_month")'>8월</li>
																		<li onclick='setDate(this, "caseD_month")'>9월</li>
																		<li onclick='setDate(this, "caseD_month")'>10월</li>
																		<li onclick='setDate(this, "caseD_month")'>11월</li>
																		<li onclick='setDate(this, "caseD_month")'>12월</li>
																	</ul>
																</div>
															</div>

															<div class="col-sm-2">
																<div class="dropdown">
																	<button class="btn btn-default dropdown-toggle" id="caseD_day" type="button" data-toggle="dropdown">
																		일 <span class="caret"></span>
																	</button>

																	<ul class="dropdown-menu level">
																		<li onclick='setDate(this, "caseD_day")'>1일</li>
																		<li onclick='setDate(this, "caseD_day")'>2일</li>
																		<li onclick='setDate(this, "caseD_day")'>3일</li>
																		<li onclick='setDate(this, "caseD_day")'>4일</li>
																		<li onclick='setDate(this, "caseD_day")'>5일</li>
																		<li onclick='setDate(this, "caseD_day")'>6일</li>
																		<li onclick='setDate(this, "caseD_day")'>7일</li>
																		<li onclick='setDate(this, "caseD_day")'>8일</li>
																		<li onclick='setDate(this, "caseD_day")'>9일</li>
																		<li onclick='setDate(this, "caseD_day")'>10일</li>
																	</ul>
																</div>
															</div>
														</div>
													</div>

													<button type="button" class="btn btn-w-m btn-primary" id="btn_link">추가하기</button>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- 이미지 모달 -->
							<div class="modal inmodal fade" id="myModal2" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
								<div class="modal-dialog modal-md">
									<div class="modal-content">
										<div class="modal-header">
											<form class="form-horizontal" id="formImage" enctype="">
												<div class="form-group" style="margin-left:15px; margin-right: 15px">
													<div class="col-sm-9" style="padding:0px;">
														<input type="text" class="form-control" placeholder="작성하세요." id="file" name="file" value="" autocomplete="off" style="cursor: pointer;" readonly>
													</div>
													<div class="col-sm-2" style="padding:0px">
														<label id="label" class="btn btn-w-m btn-default">
															파일추가 <input type="file" id="file_search" onchange="fileSetting(this)" style="display: none; z-index: 0;" />
														</label>
													</div>
												</div>

												<button type="button" class="btn btn-w-m btn-primary" id="btn_img">추가하기</button>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


	</div>



	<script>
		$(document).ready(function () {
			

			// 달력 컨트롤
			$('#date').datepicker({
				todayBtn: "linked",
				keyboardNavigation: false,
				forceParse: false,
				autoclose: true,
				format: 'yyyy-mm-dd',
				keyboardNavigation: true,
				language: 'ko'
			});

			//$('.i-checks').iCheck({
			//	radioClass: 'iradio_square-green',
			//});

			$("#calendar").click(function () {
				$('#date').datepicker('show');
			})

			$("#plus").click(function () {
				var count = $("#inprogress").children().length;

				// table 추가
				add_table($("#inprogress"), count, $("#story_add option:selected").html(), "story");

				// selectbox 1개추가(selected 옵션)
				add_selectBox_One(count, "story_seq" + count);


				// table 추가후 총 count
				var total_count = $("#inprogress").children().length;

				// 모든 selectBox에 추가
				for (var i = 0; i < total_count - 1; i++) {
					add_selectBox_All(count, "story_seq" + i);
				}
			})

			// 마우스 드래그 시 셋팅 (왼족 추가 밑에)
			$("#inprogress").sortable({
				connectWith: ".connectList",
				update: function (event, ui) {

					var inprogress = $(this).sortable("toArray");

					for (var i = 0; i < inprogress.length; i++) {
						var id = $("#" + inprogress[i]).find("select").attr("id");

						$("#" + id + " option:eq(" + i + ")").prop("selected", true);
					}
				}
			}).disableSelection();

			// 마우스 드래그 시 셋팅2 (상세페이지 밑에)
			$("#inprogress2").sortable({
				connectWith: ".connectList2",
				update: function (event, ui) {

					var inprogress = $(this).sortable("toArray");

					for (var i = 0; i < inprogress.length; i++) {
						var id = $("#" + inprogress[i]).find("select").attr("id");

						$("#" + id + " option:eq(" + i + ")").prop("selected", true);
					}
				}
			}).disableSelection();

			// 파일 추가 클릭
			$("#file").click(function () {
				$("#file_search").click();
			})

			// 이미지 파일 추가하기
			$("#btn_img").click(function () {
				var count = $("#inprogress2").children().length;
				var name = $("#detail_title").val() + " " + $("#file").val() + "리포트자료 [이미지]"

				// table 추가
				add_table($("#inprogress2"), count, name, "file");

				// selectbox 1개추가(selected 옵션)
				add_selectBox_One(count, "file_seq" + count);


				// table 추가후 총 count
				var total_count = $("#inprogress2").children().length;

				// 모든 selectBox에 추가
				for (var i = 0; i < total_count - 1; i++) {
					add_selectBox_All(count, "file_seq" + i);
				}

				// modal
				$("#myModal2").modal('hide');
			});

			// 연결리포트 추가하기
			$("#btn_link").click(function () {
				var count = $("#inprogress2").children().length;
				var name = $("#detail_title").val() + " 리포트자료 링크 [링크]"

				// table 추가
				add_table($("#inprogress2"), count, name, "file");

				// selectbox 1개추가(selected 옵션)
				add_selectBox_One(count, "file_seq" + count);


				// table 추가후 총 count
				var total_count = $("#inprogress2").children().length;

				// 모든 selectBox에 추가
				for (var i = 0; i < total_count - 1; i++) {
					add_selectBox_All(count, "file_seq" + i);
				}

				// modal
				$("#myModal").modal('hide');
			});

			// 드롭다운
			$('.dropdown-submenu a.operation, a.sales, a.production').on("click", function (e) {
				$('.dropdown-submenu a.operation, a.sales, a.production').next('ul').hide();
				$(this).next('ul').toggle();
				e.stopPropagation();
				e.preventDefault();
			});


		})


		//----------------------------- function ----------------------------------------

		// 테이블 추가
		function add_table(target, seq, text, id) {
			var flag = "";
			if (id == "story") {
				flag = 1;
			} else {
				flag = 2;
			}


			var html = "";
			html += '<li class="ui-sortable-handle form-inline" id="' + id + '_item' + seq + '">';
			html += '	<table class="seqtable">';
			html += '		<colgroup>';
			html += '			<col width="10%"/>';
			html += '			<col width="20%"/>';
			html += '			<col width="*"/>';
			html += '		</colgroup>';
			html += '		<tbody>';
			html += '			<tr>';
			html += '				<td>';
			html += '					<button type="button" class="btn btn-default btn-md minus" onclick="table_delete(' + seq + ', ' + flag + ')">';
			html += '						<i class="fa fa-minus"></i>';
			html += '					</button>';
			html += '				</td>';
			html += '				<td>';
			html += '					<select class="form-control seqselectbox" id="' + id + '_seq' + seq + '" onchange="seq_change(this, ' + flag + ')">';
			html += '					</select>';
			html += '				</td>';
			html += '				<td onclick="setDetail(this)">';
			html += '<div class="' + id + '_value">' + text + '</div>';
			html += '				</td>';
			html += '			</tr>';
			html += '		</tbody>';
			html += '	</table>';
			html += '</li>';

			$(target).append(html);
		}

		function add_selectBox_One(seq, target) {
			var html = "";
			for (var i = 0; i < seq + 1; i++) {
				if (i == seq) {
					html += '<option value="' + (i + 1) + '" selected>' + (i + 1) + '</option>';
				} else {
					html += '<option value="' + (i + 1) + '">' + (i + 1) + '</option>';
				}
			}

			$("#" + target).append(html);
		}

		function add_selectBox_All(seq, target) {
			var html = "";
			html += '<option value="' + (seq + 1) + '">' + (seq + 1) + '</option>';

			$("#" + target).append(html);
		}

		// 삭제 후 seq 재배치
		function table_delete(seq, target) {
			// 1 : story_item,  2 : file_item
			var flag = "";
			var table = "";

			if (target == 1) {
				flag = "story";
				table = "inprogress"
			} else {
				flag = "file";
				table = "inprogress2"
			}

			var count = $("#" + table).children().length;

			// 선택된 값 저장
			var selectText = [];
			for (var i = 0; i < count; i++) {
				var id = $("#" + table).children().eq(i).find("select").attr("id");
				if (id != "story_seq" + seq) {
					selectText.push($("#" + table).children().eq(i).find("." + flag + "_value").html());
				}
			}


			// 초기화 후 다시 셋팅
			$("#" + table).children().remove();
			for (var i = 0; i < count - 1; i++) {

				// table 추가
				add_table($("#" + table), i, selectText[i], flag);

				// selectbox 1개추가(selected 옵션)
				add_selectBox_One(i, flag + "_seq" + i);

				// table 추가후 총 count
				var total_count = $("#" + table).children().length;

				// 모든 selectBox에 추가
				for (var j = 0; j < total_count - 1; j++) {
					add_selectBox_All(i, flag + "_seq" + j);
				}
			}
		}

		// select box로 위치 변환시
		function seq_change(obj, target) {
			// 1 : story_item,  2 : file_item
			var flag = "";
			var table = "";

			if (target == 1) {
				flag = "story";
				table = "inprogress"
			} else {
				flag = "file";
				table = "inprogress2"
			}

			var count = $("#" + table).children().length;

			// 선택된 값 저장
			var selectText = [];
			var seq = "";
			for (var i = 0; i < count; i++) {
				selectText.push($("#" + table).children().eq(i).find("." + flag + "_value").html());

				if ($("#" + table).children().eq(i).find("select").attr("id") == obj.id) {
					seq = i;
				}
			}

			// 위치 변환된 값 바꾸기
			var temp = selectText[seq];
			selectText.splice(seq, 1, selectText[$("#" + obj.id + " option:selected").html() - 1]);
			selectText.splice([$("#" + obj.id + " option:selected").html() - 1], 1, temp);

			// 초기화 후 다시 셋팅
			$("#" + table).children().remove();
			for (var i = 0; i < count; i++) {

				// table 추가
				add_table($("#" + table), i, selectText[i], flag);

				// selectbox 1개추가(selected 옵션)
				add_selectBox_One(i, flag + "_seq" + i);

				// table 추가후 총 count
				var total_count = $("#" + table).children().length;

				// 모든 selectBox에 추가
				for (var j = 0; j < total_count - 1; j++) {
					add_selectBox_All(i, flag + "_seq" + j);
				}
			}
		}

		// 시나리오 설정추가후 제목 클릭시
		function setDetail(obj) {
			if ($(obj).children().attr("class") == "story_value") {
				$("#detail_title").val($(obj).children().html());
			}
		}

		// 추가하기 클릭시
		function addDetail() {
			// 연결리포트
			if ($("#link").parent().attr("class") == "iradio_square-green checked") {
				$("#myModal").modal('show');
			}

			// 이미지
			if ($("#image").parent().attr("class") == "iradio_square-green checked") {
				$("#myModal2").modal('show');
			}
		}

		// 파일 선택시 이름 셋팅
		function fileSetting(file) {
			$("#file").val($(file)[0].files[0].name);
		}

		// 연결리포트 - 메뉴 선택시
		function select_menu(obj) {
			$("#menu_list").html($(obj).html() + " <span class='caret'></span>");

			var menuCase = $(obj).html().substring($(obj).html().length - 3, $(obj).html().length);

			if (menuCase == "[M]") {
				$("#caseM").show();
				$("#caseQ").hide();
				$("#caseD").hide();
			}
			else if (menuCase == "[Q]") {
				$("#caseM").hide();
				$("#caseQ").show();
				$("#caseD").hide();
			}
			else if (menuCase == "[D]") {
				$("#caseM").hide();
				$("#caseQ").hide();
				$("#caseD").show();
			}
			// [D]와 같은처리
			else {
				$("#caseM").hide();
				$("#caseQ").hide();
				$("#caseD").show();
			}

		}

		// 연결 리포트 - 메뉴 선택 - 년도, 분기, 월, 일 선택시
		function setDate(obj, division) {
			$("#" + division).html($(obj).html() + " <span class='caret'></span>");
		}

		// 취소 -> 뒤로가기
		function cangoback() {
			var flag = confirm("취소시 작성중인 내용이 삭제됩니다.");
			if (flag) {
				window.history.back();
			}
		}

	</script>

	<script src="dist/js/bootstrap.min.js"></script>
</body>
</html>
